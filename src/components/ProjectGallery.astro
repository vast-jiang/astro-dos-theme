---
// src/components/ProjectGallery.astro

// ğŸ‘‡ 1. å®šä¹‰æ•°æ®ç»“æ„ (è§£å†³ TS æŠ¥é”™çš„æ ¸å¿ƒ)
// å‘Šè¯‰ä»£ç ï¼šè¿™äº›å±æ€§æ˜¯å¯é€‰çš„ï¼Œæœ‰çš„æœ‰ï¼Œæœ‰çš„æ²¡æœ‰
interface ProjectItem {
  type: string;
  title: string;
  link: string;
  date?: string;      // ? è¡¨ç¤ºå¯é€‰
  img?: string;       // ? è¡¨ç¤ºå¯é€‰
  desc?: string;      // ? è¡¨ç¤ºå¯é€‰
  tech?: string[];    // ? è¡¨ç¤ºå¯é€‰
  size?: string;      // ? è¡¨ç¤ºå¯é€‰ (è¿™å°±æ˜¯è§£å†³æŠ¥é”™çš„å…³é”®ï¼)
}

// ğŸ‘‡ 2. ç»™æ•°ç»„åŠ ä¸Šç±»å‹æ ‡æ³¨ : ProjectItem[]
const projects: ProjectItem[] = [
  
  // === ç±»å‹ 1: æ‘„å½±ä½œå“ ===
  //{ 
    //type: 'PHOTO', 
    //title: 'æˆ‘çš„æ‘„å½±ä½œå“1', 
    //date: '2025.11', 
    //img: '/images/photo1.jpg', 
    //link: '#' 
  //},
  { 
    type: 'PHOTO', 
    title: 'é£æ™¯ç…§', 
    date: '2025.10', 
    img: 'https://youke1.picui.cn/s1/2025/11/28/6929bd6ed8f55.jpg', 
    link: '#' 
  },

  // === ç±»å‹ 2: ä»£ç /ç¡¬ä»¶é¡¹ç›® ===
  { 
    type: 'CODE', 
    title: 'æˆ‘çš„ä¸ªäººç½‘ç«™', 
    desc: 'åŸºäº Astro å’Œ Tailwind CSS å¼€å‘çš„èµ›åšæœ‹å…‹é£æ ¼ä¸»é¡µã€‚', 
    tech: ['Astro', 'JS'], 
    link: 'https://github.com/vast-jiang/my-website' 
  },
  //{ 
    //type: 'PCB', 
    //title: 'ESP32 å¼€å‘æ¿', 
    //desc: 'è‡ªå·±ç”»çš„ç”µè·¯æ¿è®¾è®¡ï¼Œå¼€æºç¡¬ä»¶é¡¹ç›®ã€‚', 
    //tech: ['ç«‹åˆ›EDA', 'C++'], 
    //link: 'https://oshwhub.com/' 
  //},

  // === ç±»å‹ 3: æ–‡ä»¶ä¸‹è½½ ===
  //{ 
    //type: 'FILE', 
    //title: 'ä¸ªäººç®€å†.pdf', 
    //size: '2.5MB', 
    //desc: 'ç‚¹å‡»ä¸‹è½½æˆ‘çš„è¯¦ç»†ç®€å†', 
    //link: '/files/resume.pdf'  
  //}
];
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {projects.map(item => (
    item.type === 'PHOTO' ? (
      // æ‘„å½±å¡ç‰‡
      <a href={item.link} target="_blank" class="group relative aspect-video border border-dos-dim overflow-hidden block">
        <div class="absolute inset-0 bg-dos-primary/20 mix-blend-overlay z-10 opacity-0 group-hover:opacity-100 transition duration-300"></div>
        {/* è¿™é‡ŒåŠ ä¸ªåˆ¤æ–­ï¼Œç¡®ä¿ img å­˜åœ¨å†æ¸²æŸ“ï¼Œé˜²æ­¢ TS æç¤º */}
        {item.img && (
          <img src={item.img} alt={item.title} class="w-full h-full object-cover grayscale contrast-125 group-hover:grayscale-0 transition duration-500" />
        )}
        <div class="absolute bottom-0 left-0 bg-black/80 px-2 py-1 text-xs text-white border-t border-r border-dos-primary z-20">
          IMG_{item.title}.JPG
        </div>
      </a>
    ) : item.type === 'FILE' ? (
      // ä¸‹è½½å¡ç‰‡
      <a href={item.link} class="border border-dos-dim border-dashed p-6 flex flex-col items-center justify-center text-center hover:bg-dos-dim/10 group transition no-underline">
        <div class="text-4xl mb-2 text-dos-dim group-hover:text-dos-primary transition">ğŸ’¾</div>
        <h3 class="font-bold text-lg text-dos-primary">{item.title}</h3>
        {/* è¿™é‡Œ size å‰é¢åŠ ä¸ªé—®å·æˆ–è€…é€»è¾‘ä¸ï¼Œè™½ç„¶æœ‰äº† interface é€šå¸¸ä¸éœ€è¦ï¼Œä½†è¿™æ ·æ›´å®‰å…¨ */}
        <p class="text-xs text-dos-dim mt-1">SIZE: {item.size}</p>
        <button class="mt-4 text-xs border border-dos-primary px-4 py-1 text-dos-primary hover:bg-dos-primary hover:text-black transition">
          [ DOWNLOAD ]
        </button>
      </a>
    ) : (
      // é¡¹ç›®å¡ç‰‡ (CODE/PCB)
      <a href={item.link} target="_blank" class="glass-panel p-5 hover:-translate-y-1 transition duration-300 group no-underline block">
        <div class="flex justify-between items-start mb-3">
          <span class="bg-dos-dim/20 text-dos-primary text-xs px-2 py-0.5 rounded border border-dos-dim">{item.type}</span>
          <span class="text-xs text-dos-dim font-mono animate-pulse">>_</span>
        </div>
        <h3 class="text-xl font-bold mb-2 text-white group-hover:text-dos-primary transition">{item.title}</h3>
        <p class="text-sm text-dos-primary/70 mb-4 h-10 overflow-hidden">{item.desc}</p>
        <div class="flex gap-2">
          {item.tech?.map(t => (
            <span class="text-[10px] border border-dos-dim px-1 text-dos-dim">{t}</span>
          ))}
        </div>
      </a>
    )
  ))}
</div>